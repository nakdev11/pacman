# パックマン風ゲーム設計ドキュメント（シンプル版）

## プロジェクト概要
JavaScriptとHTML5 Canvasを使用したシンプルなパックマン風ゲーム

## 技術仕様
- **言語**: JavaScript (ES6+)
- **描画**: HTML5 Canvas API
- **ファイル構成**: HTML, CSS, JavaScript
- **対応デバイス**: PC（キーボード）、スマートフォン（タッチ操作）

## ゲーム要素

### 1. プレイヤー（パックマン）
- 円形のキャラクター
- 口の開閉アニメーション（10フレーム周期）
- 4方向移動（上下左右）
- キーボード操作（矢印キー）またはタッチ操作（方向ボタン）
- 滑らかなピクセル単位の移動（3px/frame）
- 移動方向に応じた口の向き変更

### 2. ゲームフィールド
- 10×10の固定迷路レイアウト
- 壁（移動不可エリア、青色表示）
- 通路（移動可能エリア）
- ドット（収集アイテム、黄色の小円）
- プレイヤー開始位置: (1,1)

### 3. ゲームシステム
- スコアシステム（ドット1個につき10点）
- レベルやライフは無し
- すべてのドットを集めたらクリア
- リアルタイムスコア表示
- ゲームクリア時のメッセージ表示
- STARTボタンによるゲーム再開

## ファイル構造
```
/
├── index.html          # メインHTMLファイル
├── css/
│   └── style.css       # スタイルシート
├── js/
│   ├── game.js         # メインゲームロジック
│   ├── player.js       # プレイヤークラス
│   ├── map.js          # マップ関連
│   └── utils.js        # ユーティリティ関数
└── assets/
    └── sounds/         # 効果音（オプション）
```

## 実装段階

### Phase 1: 基本構造
1. HTML/CSS/JSファイルの作成
2. Canvas設定
3. 基本的なゲームループ

### Phase 2: プレイヤー実装
1. プレイヤーキャラクターの描画
2. キーボード入力処理
3. 移動処理

### Phase 3: マップ実装
1. 10×10迷路の設計・描画
2. 衝突判定システム
3. ドットの配置・収集

### Phase 4: ゲームシステム
1. スコア表示
2. クリア処理

### Phase 5: スマートフォン対応
1. レスポンシブデザイン実装
2. タッチ操作用方向ボタン追加
3. モバイル端末での表示最適化

## 操作方法
- **PC**: 矢印キーで移動
- **スマートフォン**: 画面下部の方向ボタンをタップ

## ゲームルール
1. 全てのドットを収集するとクリア
2. ドット収集でスコア獲得

## 技術詳細

### Canvas設定
- 解像度: 400x400px
- 座標系: グリッドベース（40x40px単位、10×10マス）
- 背景色: 黒色
- レスポンシブ対応: ビューポートに応じて自動調整

### 移動システム
- ハイブリッド座標系: グリッド位置 + ピクセル位置
- 滑らかな補間移動（3px/frame）
- 次の移動先の事前判定
- 移動中の方向転換予約システム

### 衝突判定
- グリッドベースの壁判定
- ピクセル単位での滑らかな移動
- リアルタイムドット収集判定

### アニメーション
- requestAnimationFrame使用
- 60FPS対応
- パックマンの口開閉アニメーション（10フレーム周期）

### クラス構成
- **Game**: メインゲームループとイベント管理
- **Player**: プレイヤーの状態・移動・描画
- **GameMap**: 迷路データ・ドット管理・描画
- **utils.js**: 定数・座標変換関数

### カラーパレット
- プレイヤー: #ffff00（黄色）
- 壁: #0080ff（青色）
- ドット: #ffff00（黄色）
- 背景: #000（黒色）

### スマートフォン対応
- **入力方式**: タッチスクリーン対応
- **UI要素**: 
  - 4方向操作ボタン（上下左右）
  - ボタンサイズ: 60×60px（タップしやすいサイズ）
  - ボタン配置: 画面下部、十字配置
- **レスポンシブデザイン**:
  - ビューポート設定でモバイル最適化
  - ゲーム画面とボタンが画面内に収まるよう調整
- **タッチイベント**:
  - touchstart、touchend イベント対応
  - 誤タップ防止機能